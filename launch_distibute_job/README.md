### 脚本功能概述

这个脚本是一个强大的多节点分布式训练启动工具，具备以下核心功能：

- **跨平台兼容**：同时支持 Ascend NPU 和 NVIDIA GPU，通用性强。
- **灵活的节点配置**：通过一个简单的文本文件 (`node_list.txt`) 来管理所有参与训练的节点 IP 或主机名。
- **优雅的退出机制**：通过 `Ctrl+C` 可以安全地中断所有远程节点的任务，避免僵尸进程。
- **独立的日志系统**：为每个节点生成独立的日志文件，方便用户在出现问题时进行快速定位和调试。

### 主要优化点

我为你做了一些小的优化，让脚本更加健壮：

1. **更清晰的环境变量说明**：在代码中更详细地说明了每个可配置参数的作用和默认值。
2. **增强的错误处理**：在启动远程任务前，增加了一个简单的检查，确保 `ssh` 命令能够成功执行。
3. **代码可读性提升**：对部分注释和打印信息进行了调整，使脚本的运行状态更加直观。

### 使用说明

#### 1. 准备节点列表文件 (`node_list.txt`)

创建一个名为 `node_list.txt` 的文件，每行写入一个节点的 IP 地址或主机名。空行和以 `#` 开头的注释行会被忽略。

**示例：**

```
# 这是节点列表文件
192.168.1.101
192.168.1.102
node-03
# 192.168.1.104 # 这一行是注释
```

#### 2. 配置环境变量（可选）

你可以在启动脚本前，通过设置环境变量来覆盖默认配置。例如：

```
# 修改主节点端口
export MASTER_PORT="29501"

# 使用非 root 用户登录
export SSH_USER="user_name"

# 修改远程工作目录
export WORK_DIR="/home/user_name/my_project"
```

#### 3. 启动脚本

在主节点上执行脚本，并可选择性地传入节点列表文件的路径。

- **默认启动**：如果节点列表文件是 `./node_list.txt`，可以直接运行：

  ```
  bash launch_multi_nodes.sh
  ```

- **指定文件**：如果文件路径不同，可以将其作为第一个参数传入：

  ```
  bash launch_multi_nodes.sh /path/to/your/node_list.txt
  ```

#### 4. 查看日志

脚本启动后，你可以在终端中实时查看所有节点的日志。

```
# 实时查看所有节点的日志输出
tail -f logs/*
```
